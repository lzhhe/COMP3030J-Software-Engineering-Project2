<!DOCTYPE html>
{% set hasUser = True if user else False %}
<html lang="{{ session.get('language', 'en') }}" data-theme="{{ session.get('theme', 'light') }}">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/css/fonts.css"/>
    <link rel="stylesheet" href="../static/css/base2.css">
    <link rel="stylesheet" href="../static/css/colors.css">
    <link rel="stylesheet" href="../static/css/switch2.css"/>
    <link rel="stylesheet" href="../static/css/aicss.css"/>
    <link rel="stylesheet" href="../static/css/progress_bar.css"/>
    <link rel="stylesheet" href="../static/css/utils/hover-min.css"/>
    <link rel="stylesheet" href="../static/css/iconfont/iconfont.css"/>
    <link rel="stylesheet" href="../static/css/pico.conditional.min.css"/>
    <link rel="stylesheet" href="../static/css/utils/nprogress.css"/>
    <link rel="stylesheet" href="../static/css/utils/datatables.css">
    <link rel="shortcut icon" href="../static/image/icon/skyline.png">
    {% block extra_css %}{% endblock %}
    <title>{% block title %}{% endblock %}</title>
    <script>
        const themeUrl = "{{ url_for('utils.switchTheme') }}";
        const langUrl = "{{ url_for('utils.switchLanguage') }}";
        const aiUrl = "{{ url_for('utils.ai_assistant') }}";
    </script>
    <script src="../static/js/jquery-3.7.1.min.js"></script>
    <script src="../static/js/utils/sweetalert2.js"></script>
    <script src="../static/js/switch.js"></script>
    <script src="../static/js/utils/nprogress.js"></script>
    <script src="../static/js/utils/datatables.min.js"></script>
    <script src="../static/js/utils/marked.min.js"></script>
    <script src="../static/js/utils/scrollreveal.min.js"></script>
    <script src="../static/js/utils/slick.min.js"></script>
    <script src="../static/js/utils/gsap.js"></script>
    <script src="../static/js/utils/scrolltrigger.min.js"></script>
    <script src="../static/js/utils/sweetalert2.js"></script>
    <script src="../static/js/aichat.js"></script>
    {% block extra_js %}{% endblock %}
</head>
<body data-hasuser="{% if user %}true{% else %}false{% endif %}" id="top">
{% include 'switch2.html' %}
{% include 'aichat.html' %}
{% include 'header.html' %}
<section class="wrapper" id="home">
    <main class="main">
        <section class="home">
            <div class="container">
                <div class="home__inner">
                    <div class="home__subtitle">Clash studio</div>
                    <h1 class="home__title">Waste Management</h1>
                    <div class="home__descr">Let's recycle and protect the environment</div>
                    <p class="home__text">We are committed to recycling waste, reducing carbon emissions and making the
                        planet a better place</p>
                </div>
            </div>
        </section>
    </main>
    <img src="../static/image/stripe.svg" alt="" class="hero-shape shape1" loading="lazy">
    <img src="../static/image/stripe.svg" alt="" class="hero-shape shape2" loading="lazy">
</section>
<section class="about-us section" id="about">
    <div class="about-details">
        <p class="section-subtitle">about us</p>
        <h2 class="h2 section-title">What are the goals and pursuits of our company</h2>
        <p class="section-text">We have our own equipment to deal with waste,
            and we want to make it available to the public to help everyone protect the environment</p>
        <ul class="about-list">

            <li class="about-item">
                <div class="about-icon">
                    <i class="iconfont icon-youjiantou"></i>
                </div>
                <p class="about-text">
                    aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
                </p>
            </li>
            <li class="about-item">
                <div class="about-icon">
                    <i class="iconfont icon-youjiantou"></i>
                </div>
                <p class="about-text">
                    aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

                </p>
            </li>
            <li class="about-item">
                <div class="about-icon">
                    <i class="iconfont icon-youjiantou"></i>
                </div>
                <p class="about-text">
                    aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

                </p>
            </li>
            <li class="about-item">
                <div class="about-icon">
                    <i class="iconfont icon-youjiantou"></i>
                </div>
                <p class="about-text">
                    aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

                </p>
            </li>
            <li class="about-item">
                <div class="about-icon">
                    <i class="iconfont icon-youjiantou"></i>
                </div>
                <p class="about-text">
                    aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

                </p>
            </li>
            <li class="about-item">
                <div class="about-icon">
                    <i class="iconfont icon-youjiantou"></i>
                </div>
                <p class="about-text">
                    aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

                </p>
            </li>
        </ul>
    </div>
    <figure class="about-banner img-holder" style="--width: 24rem; --height: 40rem;">
        <img src="../static/image/esg.png" width="518" height="898" loading="lazy" alt=""
             class="img-cover">
        <img src="../static/image/jobs.png" width="260" height="170" loading="lazy" alt=""
             class="abs-img abs-img-1">
        <img src="../static/image/about-shape-2.png" width="500" height="500" loading="lazy" alt=""
             class="abs-img abs-img-2">
    </figure>
</section>

<section class="section" id="service" style="background: var(--panel2-color)">

    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
    <h1>abcd</h1>
</section>
<div class="fixed-text intro-section" id="flow" style="padding-top: 4rem">
    <p class="section-subtitle1">all steps</p>
    <h2 class="h2 section-title1" style="font-size: 6vh">How it works</h2>
    <p class="section-text1" style="font-size: 2vh">All waste will be handled according to the following procedures.
        Thank you for your
        contribution to protecting the environment</p>
</div>
<section class="flow-info">
    <div class="scrollbox flow-info-div">
        <div class="scrollbox_container flow-info-div">
            <div class="scrollbox_container_card flow-info-div">
                <p>card one</p>
                <img class="scc_city scc_city1" src="../static/image/city.png" alt="">
                <img class="scc_truck scc_truck1" src="../static/image/truck.svg" alt="">
            </div>
            <div class="scrollbox_container_card flow-info-div">
                <p>card two</p>
                <img class="scc_city scc_city2" src="../static/image/city.png" alt="">
                <img class="scc_truck scc_truck2" src="../static/image/truck.svg" alt="">
            </div>
            <div class="scrollbox_container_card flow-info-div">
                <p>card three</p>
                <img class="scc_city scc_city3" src="../static/image/city.png" alt="">
                <img class="scc_truck scc_truck3" src="../static/image/truck.svg" alt="">
            </div>
            <div class="scrollbox_container_card flow-info-div">
                <p>card four</p>
                <img class="scc_city scc_city4" src="../static/image/city.png" alt="">
                <img class="scc_truck scc_truck4" src="../static/image/truck.svg" alt="">
            </div>
        </div>
    </div>
</section>
<a href="#top" class="back-top-btn" aria-label="Back to top" data-back-top-btn>
    <i class="iconfont icon-top"></i>
</a>
{% block extra_thing %}{% endblock %}
<script>
    $(document).ready(function () {
        let hasUser = $('body').data('hasuser');

        $('.need-user').click(function (event) {
            if (!hasUser) {
                event.preventDefault();
                Swal.fire({
                    position: 'top',
                    title: 'Please login to use functions!',
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonText: 'Yes',
                    cancelButtonText: 'No',
                    reverseButtons: true,
                    timer: 4000,
                    timerProgressBar: true,
                }).then((result) => {
                    // 如果用户点击了确定按钮
                    if (result.isConfirmed) {
                        sessionStorage.clear();
                        window.location.href = "{{ url_for('login.lpage') }}";
                    }
                });
            }
        });

        $('.header__burger').click(function (event) {
            $('.header__burger, .menu').toggleClass('active');
            $('body').toggleClass('lock');
            $('.menu').toggleClass('open');
        });

        $('.menu__link').click(function (event) {
            $('.header__burger, .menu').removeClass('active');
            $('body').removeClass('lock');
        });

        // 添加点击事件监听器
        $('#logoutButton').click(function (event) {
            // 阻止默认的链接点击行为
            event.preventDefault();
            // 使用 Swal 弹出确认对话框
            Swal.fire({
                position: 'top',
                title: 'Are you sure to logout?',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Yes',
                cancelButtonText: 'No',
                reverseButtons: true,
                timer: 4000,
                timerProgressBar: true,
            }).then((result) => {
                // 如果用户点击了确定按钮
                if (result.isConfirmed) {
                    sessionStorage.clear();
                    window.location.href = "{{ url_for('login.logout') }}";
                }
            });
        });
        $(document).keydown(function (event) {
            if (event.which === 27) {
                Swal.fire({
                    position: 'top',
                    title: 'Are you sure to logout?',
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonText: 'Yes',
                    cancelButtonText: 'No',
                    reverseButtons: true,
                    timer: 4000,
                    timerProgressBar: true,
                }).then((result) => {
                    // 如果用户点击了确定按钮
                    if (result.isConfirmed) {
                        window.location.href = "{{ url_for('login.logout') }}";
                    }
                });
            }
        });


    });
    const sr = ScrollReveal({
        origin: 'top',
        distance: '50px',
        duration: 2000,
        depay: 400,
        reset: true
    });
    sr.reveal(`.home__subtitle`, {origin: 'top'})
    sr.reveal(`.home__title`, {origin: 'left'})
    sr.reveal(`.home__descr`, {origin: 'right'})
    sr.reveal(`.home__text`, {origin: 'top'})
    sr.reveal(`.section-subtitle`, {origin: 'left'})
    sr.reveal(`.section-title`, {origin: 'right'})
    sr.reveal(`.section-text`, {origin: 'bottom'})


    // Debounce function to limit the rate at which a function is executed
    function debounce(func, wait, immediate) {
        let timeout;
        return function () {
            let context = this, args = arguments;
            let later = function () {
                timeout = null;
                if (!immediate) func.apply(context, args);
            };
            let callNow = immediate && !timeout;
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
            if (callNow) func.apply(context, args);
        };
    }

    const scrollbox = {
        container: document.querySelector(".scrollbox_container"),
        cards: [...document.querySelectorAll(".scrollbox_container_card")],
        trucks: [...document.querySelectorAll(".scc_truck")],
        citys: [...document.querySelectorAll(".scc_city")],
        trigger_distance: 0,
        border_distance: 0,
        distance: 0,
        resize() {
            let _scrollbox = document.querySelector(".scrollbox");
            _scrollbox.style.height = `${this.container.offsetWidth}px`;
            this.trigger_distance = _scrollbox.offsetTop;
            this.border_distance = _scrollbox.offsetTop + _scrollbox.offsetHeight - innerHeight;
        },
        move() {
            if (scrollY >= this.trigger_distance && scrollY <= this.border_distance) {
                this.distance = scrollY - this.trigger_distance;
                this.container.style.transform = `translateY(${this.distance}px)`;
                let distance_x = (this.distance + 50) / (this.border_distance - this.trigger_distance) * (this.container.offsetWidth - innerWidth);
                for (let i = 0; i < this.cards.length; i++) {
                    this.cards[i].style.transform = `translateX(${-distance_x}px)`;
                    this.trucks[i].style.transform = `translateX(${distance_x * 1.6}px)`;
                    this.citys[i].style.transform = `translateX(${distance_x * 0.8}px)`;
                }
            }
        }
    };
    scrollbox.resize();
    window.addEventListener("resize", debounce(() => {
        scrollbox.resize();
    }, 250)); // Execute at most once every 250ms
    window.addEventListener("scroll", () => {
        requestAnimationFrame(() => {
            scrollbox.move();
        });
    });
    const header = document.querySelector("[data-header]");
    const backTopBtn = document.querySelector("[data-back-top-btn]");

    window.addEventListener("scroll", function () {
        if (window.scrollY >= 100) {
            header.classList.add("active");
            backTopBtn.classList.add("active");
        } else {
            header.classList.remove("active");
            backTopBtn.classList.remove("active");
        }
    });


</script>
</body>
</html>